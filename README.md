# AMProdigy

AMProdigy 是一个多肽理化性质计算和多肽预测功能的系统，旨在为抗菌肽的研究和应用提供全方位的支持。当前版本提供了多肽的理化性质计算，还将支持多种高级功能，如多肽性质预测、特征推荐、典型多肽筛选等。

## 功能

### 1. 理化性质计算

**输入**：多肽序列（fasta 格式字符串）  
**输出**：多肽的理化性质，返回值为一个 JSON 格式，其中包含各项物理化学属性（如分子量、等电点等）。

### 2. 多序列功能预测

**输入**：

- 多肽序列（fasta 格式字符串）
- 菌种名称列表（字符串）
- 模型名称列表
- 任务名称

**输出**：

- 针对不同模型的预测结果（包括是否是抗菌肽、logMIC 值、预测概率等）

### 3. 典型多肽筛选

**输入**：

- 目标菌种名称（字符串）
- 候选数量（整数）

**输出**：

- 筛选出的候选序列及其理化性质，返回值为一个 JSON 格式。

### 4. 特征推荐任务提交

**输入**：AMP 样本 fasta 文件（负样本自动生成）  
**输出**：特征排名，返回值为一个 JSON 格式。

### 5. 典例解析

**输入**：

- AMP 样本 fasta 文件（负样本自动生成）
- 典例列表 fasta 文件

**输出**：

- 典例特征分析报告，返回值为一个 JSON 格式。如果没有输入典例，则默认使用核心集合进行分析。

### 6. 序列生成

**输入**：

- 目标序列列表（fasta 格式字符串）
- 采样数目（整数）
- 距离阈值（浮动值）

**输出**：

- 生成的多肽序列，返回值为 fasta 格式字符串。

### 7. 直接生成

**输入**：

- 序列 embedding

**输出**：

- 生成的多肽序列，度量值。

### 8. 编辑距离计算

**输入**：

- 2 对多肽序列（fasta 格式字符串）
- 候选指示表列表

**输出**：

- 编辑距离的 JSON 格式结果。

### 9. 多肽改造任务提交

**输入**：

- 目标序列列表（fasta 格式字符串）
- 典例列表（fasta 格式字符串）
- 候选性质列表
- 目标菌种列表
- 是否考虑毒性

**输出**：

- 任务 ID（提交成功时返回）

### 10. 多肽直接生成任务提交

**输入**：

- 典例列表（fasta 格式字符串）
- 候选性质列表
- 目标菌种列表
- 是否考虑毒性

**输出**：

- 任务 ID（提交成功时返回）

### 11. 任务查询

**输入**：

- 任务 ID

**输出**：

- 查询到的任务信息，包括任务的当前状态、结果等。

### 任务筛选依据

- **改造任务筛选依据**：

  1. 与目标序列的编辑距离尽可能接近。
  2. 与典例的候选指标尽可能接近。
  3. 预测为抗菌肽且概率较高。
  4. 目标的 MIC 尽可能小。

- **Denovo（相对）任务筛选依据**：
  1. 与典例的编辑距离尽可能大。
  2. 与典例的候选指标尽可能接近。
  3. 预测为抗菌肽且概率较高。
  4. 目标的 MIC 尽可能小。

## 安装与使用

### 环境要求

- Python 3.11+
- Docker

### 安装步骤

1. 克隆本仓库：

   ```bash
   git clone https://github.com/your-username/AMProdigy.git
   cd AMProdigy
   ```

2. 安装依赖：

   ```bash
   pip install -r requirements.txt
   ```

3. 运行 FastAPI 应用：
   ```bash
   uvicorn app.main:app --reload
   ```

### Docker 使用

1. 构建 Docker 镜像：

   ```bash
   docker build -t amprodigy .
   ```

2. 运行 Docker 容器：

   ```bash
   docker run -d -p 8000:8000 amprodigy
   ```

3. 访问 API：
   打开浏览器访问 [http://localhost:8000/docs](http://localhost:8000/docs) 查看 API 文档并进行交互式测试。

## 贡献

欢迎贡献代码！如果你有任何问题或建议，可以提交 issue 或者直接通过 PR 提交。

## 联系

- Email: spencerxu79@gmail.com
- 项目主页: [https://github.com/SpencerRaw/AMProdigy](https://github.com/SpencerRaw/AMProdigy)
